# 指南

### 1. 面向的读者
书名《城市空间数据分析方法》即反映了研究专业方向，包括城市规划、风景园林、建筑、生态、地理信息等专业。人群为高校在校学生和研究者、企事业的规划设计师。

### 2. 电脑的配置与库的安装

#### 电脑的配置
本书涉及到深度学习，为了增加运算速度，用到GPU。关于选择哪种GPU可以查看相关信息。作者所使用的配置为(仅作参考)：
```
OMEN by HP Laptop 15
Processor - Intel(R) Core(TM) i9-9880H CPU @2.30GHz 
Installed RAM - 32.0GB(31.9GB usable)
System type - 64-bit operating system, x64-based processor

Display adapter - NVIDA GeForce RTX 2080 with Max-Q Design
```

> 建议内存最低32.0GB,最好64.0GB以上，或者更高。如果内存较低，则考虑分批读取处理数据后合并等方法。善用内存管理，数据读写方式（例如用HDF5格式等）。

城市空间数据分析通常涉及到海量数据处理，例如芝加哥城区域三维激光雷达数据约有1.41TB。如果使用的是笔记本电脑，最好配置容量大的外置硬盘。虽然会影响到读取和存储速度，但是避免对笔记本自身存储空间的占用，影响运算速度。

#### 库的安装
Anaconda集成环境，使得python库的安装，尤其处理库之间的依赖关系不再是让coder们扰心的事。但是，虽然Anaconda提供了非常友好的库管理环境，但还是会有个别库之间的冲突。在安装过程中也有可能造成失败，连同原以安装的库也会出现问题，从而无形之中增加了学习的时间成本。因此，在开始本书代码之前，不要在一个环境之下一气安装所有需要的库。而应是跟随着代码的编写，根据提示，再行安装。

同时，对于某一项目工程，最好仅建立支持本项目的环境，使之轻便。网络环境部署时也不会有冗余。对于自行练习或者不是很繁重的项目任务，只要环境能够支持不崩溃应该就可以。


### 3. 如何学习

#### 善用`print()`
`print()`是python语言中使用最为频繁的语句。在代码编写、调试过程中，不断的用该语句来查看数据的值、数据的变化、数据的结构、变量所代表的内容、监测程序进程、以及显示结果等。通过`print()`实时查看数据反馈，才可知道代码编写的目的是否达到，并做出反馈。善用`print()`是用python写代码的基础。

#### 充分利用搜索引擎
代码的世界摸不到边际，不可能记住所有方法函数；而且代码库在不断的更新完善，记住的不一定是对的。学习代码关键的仍旧是养成写代码的习惯，训练写代码的思维，最终是借助这个工具来解决实际的问题。那些无数的库、函数、方法、属性等内容，通常是在写代码过程中，充分利用搜索引擎来查找。其中往往能够找到答案的一个平台是[StackOverflow](https://stackoverflow.com/)，及对应库的官网在线文档等。经常用到的方法函数会在不知不觉中记住，或有意识的对经常用到的方法函数强化记忆。即使对使用过的方法仅存有蛛丝马迹的印象，通常也可以依据这些线索快速的再行搜索。

#### 由案例来学习
千言万语不如一个简单的案例示范。通常查看某一个函数、方法及属性的功用，最好的途径是直接搜索案例来查看数据结构的变化。往往不需要阅读相关解释文字，就可以从数据的前后变化中获悉该方法的作用。再辅助阅读文字说明，进一步深入理解或者找到不明地方的解释。

#### 库的学习
城市空间数据分析方法在各类实验中使用有大量的相关库，例如[SciPy](https://www.scipy.org/)，[NumPy](https://numpy.org/)，[pandas](https://pandas.pydata.org/)，[scikit-learn](https://scikit-learn.org/stable/)，[PyTorch](https://pytorch.org/)，[statsmodels](https://www.statsmodels.org/stable/index.html)，[SymPy](https://www.sympy.org/en/index.html)，[Pygame](https://www.pygame.org/news)，[matplotlib](https://matplotlib.org/)，[Plotly](https://plotly.com/)，[seaborn](https://seaborn.pydata.org/)，[bokeh](https://docs.bokeh.org/en/latest/index.html)，[GeoPandas](https://geopandas.org/)，[GDAL](https://gdal.org/)，[rasterstats](https://pythonhosted.org/rasterstats/)，[Shapely](https://shapely.readthedocs.io/en/latest/manual.html)，[pathlib](https://docs.python.org/3/library/pathlib.html)，[PySAL](https://pysal.org/)，[NetworkX](https://networkx.github.io/)，[rasterio](https://rasterio.readthedocs.io/en/latest/)，[EarthPy](https://earthpy.readthedocs.io/en/latest/)，[PDAL](https://pdal.io/)，[scikit-imge](https://scikit-image.org/)，[VTK](https://vtk.org/)，[flask](https://flask.palletsprojects.com/en/1.1.x/)，[sqlite3](https://docs.python.org/3/library/sqlite3.html)，[cv2](https://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_gui/py_image_display/py_image_display.html)，[re](https://docs.python.org/3/library/re.html)，[itertools](https://docs.python.org/3/library/itertools.html)，[urllib](https://docs.python.org/3/library/urllib.html)，[Pillow](https://python-pillow.org/)，[tkinter](https://docs.python.org/3/library/tkinter.html)等。很多库都是大体量，每个库单独学习都会花费一定时间。如果应用到的库，之前没有接触过，一种方式是，在阅读到相关部分用到该库时，提前快速的学习各个库官方提供的教程(tutorial)，配合手册（manual），快速掌握库的主要结构，再继续阅读本书实验；另一种方式是，为了不打断阅读的连续性，可以只查找用到该库的类或函数的内容。

每个库的内容一般都会非常多，不需要一一学习，用到时再根据需要有针对性和有目的性的查阅。但是也有些库是需要系统的看其教程，例如scikit-learn、PyTorch等重量型的库。

#### 用代码学习数学公式
书面表达音乐的方式是乐谱，那么最能体现数学特点的就是公式。大多数人在开始接触公式时，可能不适应。但是逐步用公式代替文字阐述的方法时， 会慢慢喜欢上这种方式。然而很多时候公式及文字阐述让人费解，怎么也读不懂作者所阐述的究竟是什么，尤其包含大部分公式，而案例都是“白纸黑字”的论述时。这是因为很难去调整参数再实验作者的案例。但是python等语言，数据、代码都是实实在在的东西，可以用print()查看每一步数据的变化。尤其不易理解的地方，比较前后的数据变化，和所用的数据，一切都会迎刃而解。这也是，为什么本书的所有阐述都基于代码。公式和文字阐释不易理解的时候，只要逐行的运行代码，往往能明了。同时尽可能的将数据以图示的方式表述，来增加理解的方式，让问题更容易浮出水面。


#### 避免重复造轮子
“避免重复造轮子”是程序员的一个‘座右铭’。当然每个人所持的观点不尽相同，但是可以肯定的是，没有必要从零开始搭建所有项目内容。这如同再写python的所有库，甚至python核心内容的东西。例如scikit-learn、PyTorch集成了大量的模型算法，通常直接调用，不会再重复写这些代码。本书阐述过程中，会有意识对最为基本的部分按照计算公式重写代码，目的是认识清楚内里逻辑，而实际的项目则无需如此。

#### 对于那些绕弯的代码
读代码不是读代码本身，而是读代码解决问题的逻辑策略。有些代码比较简单，例如数组的加减乘除。但是有些代码往往“不知其所以然”，却解决了某一问题。那么这里面可能就有一些非常巧妙的处理手段，例如梯度下降法、主成分分析、生成对抗网络，以及各类算法等。很多时候解决问题的方法越巧妙，逻辑方法越不同于常规，因此阅读起来可能不那么容易。对于这些绕弯的代码，除了必要不断查看数据变化，甚至结合图表分析，网络搜索易懂的解释文字外，需要耐下心和静下心来，找到作者所发现的方法。甚至很多时候需要休息下，松弛下脑筋再探索。

#### 为什么有时要理解算法
库中的方法通常是解决某一问题算法的体现，一般而言直接调用该方法，避免重复造轮子，这毋庸置疑。但是，有时很多算法能够启发我们，从而对某些问题提出新的解决策略。因此有意识的去理解一些算法是必要的。

#### 对于“千行+”复杂代码的学习
百千行的代码能够一下子看懂的可能性不大，尤其这些代码以类的形式出现时，各类参数、变量，甚至函数自身在各个函数下不断的跳跃，乃至分支、合并、不断产生新的变量。捋清楚初始化的条件，以及初始化参数传输的路径是首先需要做的事，这个过程视代码的复杂程度难易变化。一旦清楚了代码运行的流程，即语句执行的顺序（有顺序，也有并行），可以将其记录下来，方便进一步的分析，避免遗忘。进而开始第2阶段的代码分析，因为已经清楚了流程，那么就从开始逐行的运行代码，打印数据，理解每一行代码所要解决的是哪些问题。当然这个过程与捋清代码运行流程可以同时进行，边梳理运行行，边分析代码是如果解决问题的。在逐行分析代码时，往往会遇到那些绕弯的代码，如果一时无法理解，在不影响后续代码运行前提下，可以先绕过，直接获取用于后续代码行的数据，最后再重点分析这些绕弯的代码。如果无法绕过的话，就只能花费精力先来解决这个问题。

#### 参考文献的推荐
城市空间数据分析方法需要多学科的融合，涉及规划、建筑和景观的专业知识，python等语言知识，数学（统计学、微积分、线性代数），数据库，以及地理信息系统，生态学等大类，其下则是更为繁杂的小类细分。虽然涉猎内容众多，但实际上，只是用到在解决某一问题时所需要的知识。当在阅读时，如果该处的知识点不是很明白，可以查找相关文献补充阅读。在每一部分，也提供了所参考的文献，必要时可以翻看理解或印证。


